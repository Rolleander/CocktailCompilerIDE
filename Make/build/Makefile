
###################################################################
#SETTINGS
CC		= gcc
C_FLAGS	= -DYYDEBUG

##################################################################
#SOURCES

BIN = prog
REX = ..\src\test.rex
OBJ = l_scan.o

###############################################################################

$(BIN): $(OBJ)
	$(CC) $(CFLAGS) -o prog $(OBJ) $(LDFLAGS)

# Generate the scanner
l_scan.c: $(REX)
	rex -cdis -y  $(REX)

# Compile the stuff
%.o: %.c
	$(CC) $(C_FLAGS) -c $<

# These files are generated by REX too:
l_scan.h: 	l_scan.c
l_scanSource.c: l_scan.c
l_scanSource.h: l_scan.c

#clean rule
.PHONY: clean
clean:
	rm -rf $(BIN) $(OBJ)
###############################################################################

