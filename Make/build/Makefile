
###################################################################
#SETTINGS
CC		= gcc
COCKTAIL = E:\Cocktail-0810
C_FLAGS	= -DYYDEBUG -L$(COCKTAIL)\lib -I$(COCKTAIL)\lib\include


##################################################################
#SOURCES
BIN = prog

# Source files
REX = test.rex

SRC_C		= main.c
SRC_H		=
SRC		= $(REX)

# Generated files
GEN_C		= l_scan.c l_scanSource.c
GEN_H		= l_scan.h l_scanSource.h
GEN		=


###############################################################################
$(BIN): $(OBJ)
	$(CC) $(CFLAGS)  -o $(BIN) $(OBJ) 
	
# Generate the scanner
l_scan.c: $(REX)
	rex -cdis -y  $(REX)
	rm -f l_scanDrv.c
	
# compile the stuff
.SUFFIXES:	.c .o
.c.o:
	$(CC) $(CFLAGS) -c $<
	
# These files are generated by REX too:
l_scan.h: 	l_scan.c
l_scanSource.c: l_scan.c
l_scanSource.h: l_scan.c

#clean rule
.PHONY: clean
clean:
	rm -rf $(BIN) $(OBJ)
	
# list of all object files, based on the variables $(GEN_C) and $(SRC_C)
OBJ		= $(addsuffix .o, $(basename  $(notdir $(GEN_C) $(SRC_C))))

	
###############################################################################

